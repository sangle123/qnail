jQuery(function ($) { $(document).ready(function () { $(".dsm_masonry_gallery").each(function (d, e) { var a = $(this); let b = a.find(".grid").data(), f = a.find(".grid").masonry({ itemSelector: ".grid-item", percentPosition: !0, columnWidth: ".grid-sizer", gutter: ".gutter-sizer", horizontalOrder: b.horizontalorder }); if (a.parents(".dsm_content_toggle").length && $(a.parents(".dsm_content_toggle").find(".dsm-toggle-btn .dsm-input")).on("change", function () { f.imagesLoaded().done(function () { f.masonry("layout") }) }), a.parents(".dsm_advanced_tabs").length && $(a.parents(".dsm_advanced_tabs").find(".dsm-tab")).on("click", function () { f.imagesLoaded().done(function () { f.masonry("layout") }) }), $(document).imagesLoaded().always(function (b) { "undefined" != typeof Waypoint ? (f.masonry("layout"), a.waypoint({ handler: function (a) { setTimeout(function () { f.masonry("layout") }, 200) }, offset: -300 })) : setTimeout(function () { f.masonry("layout") }, 150) }), !0 === b.lightbox) { var c = { type: "image", gallery: { enabled: !0 }, removalDelay: 300, mainClass: "mfp-fade", autoFocusLast: !1, image: { verticalFit: !0, titleSrc: function (a) { let b = ""; return a.el.attr("data-title") && (b += a.el.attr("data-title")), a.el.attr("data-caption") && (b += "<small class='dsm-image-caption'>" + a.el.attr("data-caption") + "</small>"), b } } }; a.find(".grid-item").children("a").magnificPopup(c) } }) }) })